#include <Adafruit_SSD1306.h>
#include <splash.h>

#define SCREEN_WIDTH 128 // OLED display width, in pixels
#define SCREEN_HEIGHT 64 // OLED display height, in pixels

#define OLED_CS 10
#define OLED_DC 9
#define OLED_RESET 8

Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &SPI, OLED_DC, OLED_RESET, OLED_CS);

// Define the size and position of the square
const int SQUARE_SIZE = 10;
int squareX = 0;
int squareY = 0;
int squareDX = 1;
int squareDY = 1;

void setup() {
  // Initialize the OLED display
  if(!display.begin(SSD1306_SWITCHCAPVCC)) {
    Serial.println(F("SSD1306 allocation failed"));
    for(;;); // Don't proceed, loop forever
  }

  // Clear the display buffer
  display.clearDisplay();
}

void loop() {
  // Move the square
  squareX += squareDX;
  squareY += squareDY;

  // Check if the square has hit the edges of the screen
  if (squareX <= 0 || squareX + SQUARE_SIZE >= SCREEN_WIDTH) {
    squareDX = -squareDX; // Reverse the X direction
  }
  if (squareY <= 0 || squareY + SQUARE_SIZE >= SCREEN_HEIGHT) {
    squareDY = -squareDY; // Reverse the Y direction
  }

  // Clear the display buffer
  display.clearDisplay();

  // Draw the square
  display.fillRect(squareX, squareY, SQUARE_SIZE, SQUARE_SIZE, WHITE);

  // Update the display
  display.display();

  // Add a small delay to slow down the animation
  delay(10);
}
